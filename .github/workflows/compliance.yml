name: Run compliance on insecure branch
# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the insecure branch
  push:
    branches: [ insecure ]
  pull_request:
    branches: [ insecure ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
       # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2
            
      - name: Check compliance
        if: ${{ 1 < 10 }}
        uses: actions/github-script@v3
        with:
          script: |
            core.setFailed('Failed compliance')

      # Runs a shell script using the runners shell
      - name: Run a shell script
        run: |
          echo Set execute permission.
          chmod +x "${GITHUB_WORKSPACE}/scripts/artifactory_compliance.sh"
          echo Run script.
          ./scripts/artifactory_compliance.sh
        
        
